@tailwind base;
@tailwind components;
@tailwind utilities;

/* =========================================
   1. 基础交互优化
   ========================================= */
html {
    scroll-behavior: smooth;
}

.custom-scrollbar::-webkit-scrollbar {
    width: 6px;
    height: 6px;
}
.custom-scrollbar::-webkit-scrollbar-track {
    background: transparent;
}
.custom-scrollbar::-webkit-scrollbar-thumb {
    background-color: #cbd5e1;
    border-radius: 20px;
}
.custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background-color: #94a3b8;
}

/* =========================================
   2. 移动端安全区域适配
   ========================================= */
@layer utilities {
    .pb-safe { padding-bottom: env(safe-area-inset-bottom, 20px); }
    .mb-safe { margin-bottom: env(safe-area-inset-bottom, 20px); }
    .pt-safe { padding-top: env(safe-area-inset-top, 20px); }
    .pb-safe-bottom { padding-bottom: calc(env(safe-area-inset-bottom) + 20px); }
}

/* =========================================
   3. 组件动画与样式
   ========================================= */
.accordion-content {
    transition: max-height 0.3s ease-out, opacity 0.3s ease-out;
}
.accordion-content.hidden {
    display: none;
}
.accordion-content.open {
    display: block;
    animation: fadeIn 0.3s ease-out forwards;
}
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(-5px); }
    to { opacity: 1; transform: translateY(0); }
}

.animate-fadeInUp {
    animation: fadeInUp 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}
@keyframes fadeInUp {
    from { opacity: 0; transform: translateY(40px); }
    to { opacity: 1; transform: translateY(0); }
}

/* [关键修复] Tab 样式重构 */
.tab-link {
    @apply relative cursor-pointer transition-all duration-200 ease-in-out whitespace-nowrap border-b-4 border-transparent text-gray-500 hover:text-gray-700;
}

/* 激活状态：文字变蓝，底边框变蓝 */
.tab-link.tab-active {
    @apply border-blue-600 text-blue-700 font-black;
}

input[data-default].text-blue-600 {
    transition: all 0.3s ease;
}

/* =========================================
   4. 打印专用修复
   ========================================= */
#print-report-container { display: none; }

@media print {
    body > *:not(#print-report-container) { display: none !important; }
    #input-sidebar, #main-results-area, #global-notifier, #mobile-open-config, #confirm-modal, #eff-calc-modal { display: none !important; }
    
    html, body {
        height: auto !important; width: 100% !important; margin: 0 !important; padding: 0 !important;
        overflow: visible !important; background-color: white !important; color: black !important;
        font-family: "Microsoft YaHei", "SimHei", sans-serif !important;
    }

    #print-report-container {
        display: block !important; position: relative !important; top: 0 !important; left: 0 !important;
        width: 100% !important; margin: 0 !important; padding: 20px 40px !important;
        background: white !important; font-size: 12pt !important;
    }

    @page { size: A4; margin: 10mm; }

    .print-header { text-align: center; border-bottom: 2px solid #000; padding-bottom: 20px; margin-bottom: 30px; }
    .print-header h1 { font-size: 24pt !important; font-weight: bold !important; margin: 0 !important; color: #000 !important; }
    .print-header p { margin-top: 10px !important; font-size: 12pt !important; color: #666 !important; }

    .print-section h3 {
        font-size: 16pt !important; font-weight: bold !important; border-left: 6px solid #000 !important;
        padding-left: 15px !important; margin-top: 40px !important; margin-bottom: 20px !important;
        background-color: #f3f4f6 !important; -webkit-print-color-adjust: exact; print-color-adjust: exact;
        padding-top: 8px; padding-bottom: 8px; color: #000 !important;
    }

    .grid { display: flex !important; flex-wrap: wrap; gap: 20px; }
    .grid > div { flex: 1 1 45% !important; border: 1px solid #999 !important; box-shadow: none !important; }

    .print-section .flex { display: block !important; }
    .print-section .flex > div { width: 100% !important; margin-bottom: 20px !important; page-break-inside: avoid; }
    img { max-width: 100% !important; height: auto !important; }
    
    table { width: 100% !important; border-collapse: collapse !important; font-size: 10pt !important; margin-top: 10px !important; }
    th, td { border: 1px solid #666 !important; padding: 8px !important; text-align: center !important; color: #000 !important; white-space: normal !important; }
    th { background-color: #e5e7eb !important; font-weight: bold !important; -webkit-print-color-adjust: exact; }
    .text-xs { font-size: 9pt !important; }
}